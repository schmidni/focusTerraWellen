{{ define "main" }}
{{ $bundleName := string .Page.Params.bundle}}
{{ $headless := .Site.GetPage $bundleName }}
{{ $reusablePages := $headless.Resources.Match "info*" }}

<main data-scroll-container id="data-scroll-container">

    <div class="fullscreen-image" data-scroll-section>
        <div class="fullscreen-image__titlesection">
            <h1>{{ .Param "Title" }}</h1>
            <h5>{{ .Param "subTitle" }}</h5>
            <h6>{{ .Content }}</h6>
            <div class="shape-outside"></div>
        </div>

        {{ if isset .Params "weitergedacht" }}
        <div id="pointer-weitergedacht" class="interactive-info__pointer">
            <div class="icon-circle icon-circle--1"></div>
            <div class="icon-circle icon-circle--2"></div>
            <div class="icon-circle icon-circle--3"></div>
            <div class="icon-circle icon-circle--4"></div>
        </div>

        <div class="fullscreen-image__weitergedacht hidden">

            <img class="maskottchen"
                src='/images/icons/weitergedacht/2-{{ .Param "number" }}-weitergedacht_{{ .Param "name"}}.png'
                alt='{{ .Site.Language.Params.params.weiter_alt }} {{.Param "name" | humanize}}' />

            <h5>{{ .Site.Language.Params.params.weiter }}</h5>
            <h6>{{ .Param "weitergedacht" }}</h6>
            <div class="shape-outside"></div>

            <div id="close-weitergedacht" class="fullscreen-image__weitergedacht__close">
                <span class="close-icon">&nbsp;</span>
            </div>

        </div>
        {{ end }}

        <!--
            800w -> 600h
            1280w -> 800h
            1920w -> 1080h    
            2560w -> 1440h
            3840w -> 2160h
        
        -->

        <img class="fullscreen-image__img" srcset='/images/stories/{{ .Param "name" }}_600h.jpg 1600w,
                        /images/stories/{{ .Param "name" }}_800h.jpg 2133w,
                        /images/stories/{{ .Param "name" }}_1080h.jpg 2880w,
                        /images/stories/{{ .Param "name" }}_1440h.jpg 3840w,
                        /images/stories/{{ .Param "name" }}.jpg 5680w' sizes="270vw"
            src='/images/stories/{{ .Param "name" }}.jpg'
            alt='{{ .Site.Language.Params.params.fullscreen_image_alt }} {{.Param "name" | humanize }}' />

        {{ range .Param "annotations" }}
        <div class="annotations">
            <div class="annotations__element" data-posx="{{.posx}}" data-posy="{{.posy}}" data-rot="{{.rot}}">
                {{.string}}
            </div>
        </div>
        {{ end }}

        {{ range $reusablePages }}
        <div class=" interactive-info" data-posx='{{ .Param "posx" }}' data-posy='{{ .Param "posy" }}'>
            <div id="pointer-1" class="interactive-info__pointer">
                <div class="icon-circle icon-circle--1"></div>
                <div class="icon-circle icon-circle--2"></div>
                <div class="icon-circle icon-circle--3"></div>
                <div class="icon-circle icon-circle--4"></div>
            </div>


            <div id="text-1" class="interactive-info__text">

                <h3>{{ .Title }}</h3>
                {{ .Content }}

                <div id="close-icon-1" class="interactive-info__close">
                    <span class="close-icon">&nbsp;</span>
                </div>
            </div>
        </div>
        {{ end }}

    </div>
</main>

{{ $js := "js/stories.js" | relURL }}
<script src="{{ $js }}"></script>
{{ end }}